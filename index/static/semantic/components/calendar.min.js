!function(_,e,M,w){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),_.fn.calendar=function(g){var h,e=_(this),m=e.selector||"",y=(new Date).getTime(),D=[],v=g,b="string"==typeof v,C=[].slice.call(arguments,1);return e.each(function(){var p,U,Q=_.isPlainObject(g)?_.extend(!0,{},_.fn.calendar.settings,g):_.extend({},_.fn.calendar.settings),Z=Q.className,e=Q.namespace,t=Q.selector,G=Q.formatter,a=Q.parser,X=Q.metadata,l=Q.error,n="."+e,o="module-"+e,r=_(this),i=r.find(t.input),$=r.find(t.popup),u=r.find(t.activator),s=this,d=r.data(o),c=!1,f=!1;U={initialize:function(){U.debug("Initializing calendar for",s),p=U.get.isTouch(),U.setup.popup(),U.setup.inline(),U.setup.input(),U.setup.date(),U.create.calendar(),U.bind.events(),U.instantiate()},instantiate:function(){U.verbose("Storing instance of calendar"),d=U,r.data(o,d)},destroy:function(){U.verbose("Destroying previous calendar for",s),r.removeData(o),U.unbind.events()},setup:{popup:function(){if(!Q.inline&&(u.length||(u=r.children().first()).length))if(_.fn.popup!==w){$.length||($=_("<div/>").addClass(Z.popup).prependTo(u.parent())),$.addClass(Z.calendar);var e=Q.onVisible,t=Q.onHidden;i.length||($.attr("tabindex","0"),e=function(){return U.focus(),Q.onVisible.apply($,arguments)},t=function(){return U.blur(),Q.onHidden.apply($,arguments)});var a=Q.on||(i.length?"focus":"click"),n=_.extend({},Q.popupOptions,{popup:$,on:a,hoverable:"hover"===a,onShow:function(){return U.set.focusDate(U.get.date()),U.set.mode(Q.startMode),Q.onShow.apply($,arguments)},onVisible:e,onHide:Q.onHide,onHidden:t});U.popup(n)}else U.error(l.popup)},inline:function(){u.length&&!Q.inline||($=_("<div/>").addClass(Z.calendar).appendTo(r),i.length||$.attr("tabindex","0"))},input:function(){Q.touchReadonly&&i.length&&p&&i.prop("readonly",!0)},date:function(){if(i.length){var e=i.val(),t=a.date(e,Q);U.set.date(t,Q.formatInput,!1)}}},create:{calendar:function(){var e,t,a,n,o,r=U.get.mode(),i=new Date,l=U.get.date(),u=U.get.focusDate(),s=u||l||Q.initialDate||i;s=U.helper.dateInRange(s),u||(u=s,U.set.focusDate(u,!1,!1));var d=s.getMinutes(),p=s.getHours(),c=s.getDate(),f=s.getMonth(),g=s.getFullYear(),h="year"===r,m="month"===r,y="day"===r,D="hour"===r,v="minute"===r,b="time"===Q.type,C=y?7:D?4:3,M=7===C?"seven":4===C?"four":"three",w=y||D?6:4,x=(new Date(g,f,1).getDay()-Q.firstDayOfWeek%7+7)%7;if(!Q.constantHeight&&y){var k=new Date(g,f+1,0).getDate()+x;w=Math.ceil(k/7)}var T=h?10:m?1:0,H=y?1:0,F=D||v?1:0,I=D||v?c:1,N=new Date(g-T,f-H,I-F,p),O=new Date(g+T,f+H,I+F,p),Y=h?new Date(10*Math.ceil(g/10)-9,0,0):m?new Date(g,0,0):y?new Date(g,f,0):new Date(g,f,c,-1),E=h?new Date(10*Math.ceil(g/10)+1,0,1):m?new Date(g+1,0,1):y?new Date(g,f+1,1):new Date(g,f,c+1),R=_("<table/>").addClass(Z.table).addClass(M+" column").addClass(r);if(!b){var A=_("<thead/>").appendTo(R);n=_("<tr/>").appendTo(A),o=_("<th/>").attr("colspan",""+C).appendTo(n);var S=_("<span/>").addClass(Z.link).appendTo(o);S.text(G.header(s,r,Q));var V=m?Q.disableYear?"day":"year":y?Q.disableMonth?"year":"month":"day";S.data(X.mode,V);var P=_("<span/>").addClass(Z.prev).appendTo(o);P.data(X.focusDate,N),P.toggleClass(Z.disabledCell,!U.helper.isDateInRange(Y,r)),_("<i/>").addClass(Z.prevIcon).appendTo(P);var j=_("<span/>").addClass(Z.next).appendTo(o);if(j.data(X.focusDate,O),j.toggleClass(Z.disabledCell,!U.helper.isDateInRange(E,r)),_("<i/>").addClass(Z.nextIcon).appendTo(j),y)for(n=_("<tr/>").appendTo(A),e=0;e<C;e++)(o=_("<th/>").appendTo(n)).text(G.dayColumnHeader((e+Q.firstDayOfWeek)%7,Q))}var q=_("<tbody/>").appendTo(R);for(e=h?10*Math.ceil(g/10)-9:y?1-x:0,t=0;t<w;t++)for(n=_("<tr/>").appendTo(q),a=0;a<C;a++,e++){var J=h?new Date(e,f,1,p,d):m?new Date(g,e,1,p,d):y?new Date(g,f,e,p,d):D?new Date(g,f,c,e):new Date(g,f,c,p,5*e),K=h?e:m?Q.text.monthsShort[e]:y?J.getDate():G.time(J,Q,!0);(o=_("<td/>").addClass(Z.cell).appendTo(n)).text(K),o.data(X.date,J);var W=y&&J.getMonth()!==f||!U.helper.isDateInRange(J,r),z=U.helper.dateEqual(J,l,r);o.toggleClass(Z.disabledCell,W),o.toggleClass(Z.activeCell,z),D||v||o.toggleClass(Z.todayCell,U.helper.dateEqual(J,i,r)),U.helper.dateEqual(J,u,r)&&U.set.focusDate(J,!1,!1)}if(Q.today){var L=_("<tr/>").appendTo(q),B=_("<td/>").attr("colspan",""+C).addClass(Z.today).appendTo(L);B.text(G.today(Q)),B.data(X.date,i)}U.update.focus(!1,R),$.empty(),R.appendTo($)}},update:{focus:function(e,t){t=t||$;var i=U.get.mode(),a=U.get.date(),l=U.get.focusDate(),u=U.get.startDate(),s=U.get.endDate(),d=(e?l:null)||a||(p?null:l);t.find("td").each(function(){var e=_(this),t=e.data(X.date);if(t){var a=e.hasClass(Z.disabledCell),n=e.hasClass(Z.activeCell),o=U.helper.dateEqual(t,l,i),r=!!d&&(!!u&&U.helper.isDateInRange(t,i,u,d)||!!s&&U.helper.isDateInRange(t,i,d,s));e.toggleClass(Z.focusCell,o&&(!p||c)),e.toggleClass(Z.rangeCell,r&&!n&&!a)}})}},refresh:function(){U.create.calendar()},bind:{events:function(){$.on("mousedown"+n,U.event.mousedown),$.on("touchstart"+n,U.event.mousedown),$.on("mouseup"+n,U.event.mouseup),$.on("touchend"+n,U.event.mouseup),$.on("mouseover"+n,U.event.mouseover),i.length?(i.on("input"+n,U.event.inputChange),i.on("focus"+n,U.event.inputFocus),i.on("blur"+n,U.event.inputBlur),i.on("click"+n,U.event.inputClick),i.on("keydown"+n,U.event.keydown)):$.on("keydown"+n,U.event.keydown)}},unbind:{events:function(){$.off(n),i.length&&i.off(n)}},event:{mouseover:function(e){var t=_(e.target).data(X.date),a=1===e.buttons;t&&U.set.focusDate(t,!1,!0,a)},mousedown:function(e){i.length&&e.preventDefault(),c=0<=e.type.indexOf("touch");var t=_(e.target).data(X.date);t&&U.set.focusDate(t,!1,!0,!0)},mouseup:function(e){U.focus(),e.preventDefault(),e.stopPropagation(),c=!1;var t=_(e.target),a=t.parent();(a.data(X.date)||a.data(X.focusDate)||a.data(X.mode))&&(t=a);var n=t.data(X.date),o=t.data(X.focusDate),r=t.data(X.mode);if(n){var i=t.hasClass(Z.today);U.selectDate(n,i)}else o?U.set.focusDate(o):r&&U.set.mode(r)},keydown:function(e){if(27!==e.keyCode&&9!==e.keyCode||U.popup("hide"),U.popup("is visible"))if(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){var t=U.get.mode(),a="day"===t?7:"hour"===t?4:3,n=37===e.keyCode?-1:38===e.keyCode?-a:39==e.keyCode?1:a;n*="minute"===t?5:1;var o=U.get.focusDate()||U.get.date()||new Date,r=o.getFullYear()+("year"===t?n:0),i=o.getMonth()+("month"===t?n:0),l=o.getDate()+("day"===t?n:0),u=o.getHours()+("hour"===t?n:0),s=o.getMinutes()+("minute"===t?n:0),d=new Date(r,i,l,u,s);"time"===Q.type&&(d=U.helper.mergeDateTime(o,d)),U.helper.isDateInRange(d,t)&&U.set.focusDate(d)}else if(13===e.keyCode){var p=U.get.focusDate();p&&U.selectDate(p)}38!==e.keyCode&&40!==e.keyCode||(e.preventDefault(),U.popup("show"))},inputChange:function(){var e=i.val(),t=a.date(e,Q);U.set.date(t,!1)},inputFocus:function(){$.addClass(Z.active)},inputBlur:function(){if($.removeClass(Z.active),Q.formatInput){var e=U.get.date(),t=G.datetime(e,Q);i.val(t)}},inputClick:function(){U.popup("show")}},get:{date:function(){return r.data(X.date)||null},focusDate:function(){return r.data(X.focusDate)||null},startDate:function(){var e=U.get.calendarModule(Q.startCalendar);return(e?e.get.date():r.data(X.startDate))||null},endDate:function(){var e=U.get.calendarModule(Q.endCalendar);return(e?e.get.date():r.data(X.endDate))||null},mode:function(){var e=r.data(X.mode)||Q.startMode,t=U.get.validModes();return 0<=_.inArray(e,t)?e:"time"===Q.type?"hour":"month"===Q.type?"month":"year"===Q.type?"year":"day"},validModes:function(){var e=[];return"time"!==Q.type&&(Q.disableYear&&"year"!==Q.type||e.push("year"),(!Q.disableMonth&&"year"!==Q.type||"month"===Q.type)&&e.push("month"),0<=Q.type.indexOf("date")&&e.push("day")),0<=Q.type.indexOf("time")&&(e.push("hour"),Q.disableMinute||e.push("minute")),e},isTouch:function(){try{return M.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(e){return e?(e instanceof _||(e=r.parent().children(e).first()),e.data(o)):null}},set:{date:function(e,t,a){t=!1!==t,a=!1!==a,e=U.helper.sanitiseDate(e),e=U.helper.dateInRange(e);var n=G.datetime(e,Q);if(a&&!1===Q.onChange.call(s,e,n))return!1;var o=U.get.endDate();o&&e&&o<e&&U.set.endDate(w),U.set.dataKeyValue(X.date,e),U.set.focusDate(e),t&&i.length&&i.val(n)},startDate:function(e,t){e=U.helper.sanitiseDate(e);var a=U.get.calendarModule(Q.startCalendar);a&&a.set.date(e),U.set.dataKeyValue(X.startDate,e,t)},endDate:function(e,t){e=U.helper.sanitiseDate(e);var a=U.get.calendarModule(Q.endCalendar);a&&a.set.date(e),U.set.dataKeyValue(X.endDate,e,t)},focusDate:function(e,t,a,n){e=U.helper.sanitiseDate(e),e=U.helper.dateInRange(e);var o=U.set.dataKeyValue(X.focusDate,e,t);a=!1!==a&&o&&!1===t||f!=n,f=n,a&&U.update.focus(n)},mode:function(e,t){U.set.dataKeyValue(X.mode,e,t)},dataKeyValue:function(e,t,a){var n=r.data(e),o=n===t||n<=t&&t<=n;return t?r.data(e,t):r.removeData(e),(a=!1!==a&&!o)&&U.create.calendar(),!o}},selectDate:function(e,t){var a=U.get.mode();if(t||"minute"===a||Q.disableMinute&&"hour"===a||"date"===Q.type&&"day"===a||"month"===Q.type&&"month"===a||"year"===Q.type&&"year"===a){if(!(!1===U.set.date(e))&&Q.closable){U.popup("hide");var n=U.get.calendarModule(Q.endCalendar);n&&(n.popup("show"),n.focus())}}else{var o="year"===a?Q.disableMonth?"day":"month":"month"===a?"day":"day"===a?"hour":"minute";U.set.mode(o),"hour"===a||"day"===a&&U.get.date()?U.set.date(e):U.set.focusDate(e)}},changeDate:function(e){U.set.date(e)},clear:function(){U.set.date(w)},popup:function(){return u.popup.apply(u,arguments)},focus:function(){i.length?i.focus():$.focus()},blur:function(){i.length?i.blur():$.blur()},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=a.date(""+e,Q)),isNaN(e.getTime())?w:e):w},dateDiff:function(e,t,a){a=a||"day";var n="time"===Q.type,o="year"===a,r=o||"month"===a,i="minute"===a,l=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n?0:o?0:e.getMonth(),n?1:r?1:e.getDate(),l?e.getHours():0,i?5*Math.floor(e.getMinutes()/5):0),(t=new Date(n?2e3:t.getFullYear(),n?0:o?0:t.getMonth(),n?1:r?1:t.getDate(),l?t.getHours():0,i?5*Math.floor(t.getMinutes()/5):0)).getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===U.helper.dateDiff(e,t,a)},isDateInRange:function(e,t,a,n){if(!a&&!n){var o=U.get.startDate();a=o&&Q.minDate?new Date(Math.max(o,Q.minDate)):o||Q.minDate,n=Q.maxDate}return a=a&&new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),5*Math.ceil(a.getMinutes()/5)),!(!e||a&&0<U.helper.dateDiff(e,a,t)||n&&0<U.helper.dateDiff(n,e,t))},dateInRange:function(e,t,a){if(!t&&!a){var n=U.get.startDate();t=n&&Q.minDate?new Date(Math.max(n,Q.minDate)):n||Q.minDate,a=Q.maxDate}t=t&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),5*Math.ceil(t.getMinutes()/5));var o="time"===Q.type;return e?t&&0<U.helper.dateDiff(e,t,"minute")?o?U.helper.mergeDateTime(e,t):t:a&&0<U.helper.dateDiff(a,e,"minute")?o?U.helper.mergeDateTime(e,a):a:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(e,t){if(U.debug("Changing setting",e,t),_.isPlainObject(e))_.extend(!0,Q,e);else{if(t===w)return Q[e];_.isPlainObject(Q[e])?_.extend(!0,Q[e],t):Q[e]=t}},internal:function(e,t){if(U.debug("Changing internal",e,t),t===w)return U[e];_.isPlainObject(e)?_.extend(!0,U,e):U[e]=t},debug:function(){!Q.silent&&Q.debug&&(Q.performance?U.performance.log(arguments):(U.debug=Function.prototype.bind.call(console.info,console,Q.name+":"),U.debug.apply(console,arguments)))},verbose:function(){!Q.silent&&Q.verbose&&Q.debug&&(Q.performance?U.performance.log(arguments):(U.verbose=Function.prototype.bind.call(console.info,console,Q.name+":"),U.verbose.apply(console,arguments)))},error:function(){Q.silent||(U.error=Function.prototype.bind.call(console.error,console,Q.name+":"),U.error.apply(console,arguments))},performance:{log:function(e){var t,a;Q.performance&&(a=(t=(new Date).getTime())-(y||t),y=t,D.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:s,"Execution Time":a})),clearTimeout(U.performance.timer),U.performance.timer=setTimeout(U.performance.display,500)},display:function(){var e=Q.name+":",a=0;y=!1,clearTimeout(U.performance.timer),_.each(D,function(e,t){a+=t["Execution Time"]}),e+=" "+a+"ms",m&&(e+=" '"+m+"'"),(console.group!==w||console.table!==w)&&0<D.length&&(console.groupCollapsed(e),console.table?console.table(D):_.each(D,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),D=[]}},invoke:function(n,e,t){var o,r,a,i=d;return e=e||C,t=s||t,"string"==typeof n&&i!==w&&(n=n.split(/[\. ]/),o=n.length-1,_.each(n,function(e,t){var a=e!=o?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(_.isPlainObject(i[a])&&e!=o)i=i[a];else{if(i[a]!==w)return r=i[a],!1;if(!_.isPlainObject(i[t])||e==o)return i[t]!==w?r=i[t]:U.error(l.method,n),!1;i=i[t]}})),_.isFunction(r)?a=r.apply(t,e):r!==w&&(a=r),_.isArray(h)?h.push(a):h!==w?h=[h,a]:a!==w&&(h=a),r}},b?(d===w&&U.initialize(),U.invoke(v)):(d!==w&&d.invoke("destroy"),U.initialize())}),h!==w?h:e},_.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(a+2)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){return t.text.months[e.getMonth()]+" "+e.getFullYear()},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var a="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1);return a+("datetime"===t.type?" ":"")+n},date:function(e,t){if(!e)return"";var a=e.getDate(),n=t.text.months[e.getMonth()],o=e.getFullYear();return"year"===t.type?o:"month"===t.type?n+" "+o:(t.monthFirst?n+" "+a:a+" "+n)+", "+o},time:function(e,t,a){if(!e)return"";var n=e.getHours(),o=e.getMinutes(),r="";return t.ampm&&(r=" "+(n<12?t.text.am:t.text.pm),n=0===n?12:12<n?n-12:n),n+":"+(o<10?"0":"")+o+r},today:function(e){return"date"===e.type?e.text.today:e.text.now}},parser:{date:function(e,t){if(!e)return null;if(0===(e=(""+e).trim().toLowerCase()).length)return null;var a,n,o,r=-1,i=-1,l=-1,u=-1,s=-1,d=w,p="time"===t.type,c=t.type.indexOf("time")<0,f=e.split(t.regExp.dateWords),g=e.split(t.regExp.dateNumbers);if(!c)for(d=0<=_.inArray(t.text.am.toLowerCase(),f)||!(0<=_.inArray(t.text.pm.toLowerCase(),f))&&w,a=0;a<g.length;a++){var h=g[a];if(0<=h.indexOf(":")){if(i<0||r<0){var m=h.split(":");for(o=0;o<Math.min(2,m.length);o++)n=parseInt(m[o]),isNaN(n)&&(n=0),0===o?i=n%24:r=n%60}g.splice(a,1)}}if(!p){for(a=0;a<f.length;a++){var y=f[a];if(!(y.length<=0)){for(y=y.substring(0,Math.min(y.length,3)),n=0;n<t.text.months.length;n++){var D=t.text.months[n];if((D=D.substring(0,Math.min(y.length,Math.min(D.length,3))).toLowerCase())===y){u=n+1;break}}if(0<=u)break}}for(a=0;a<g.length;a++)if(n=parseInt(g[a]),!isNaN(n)&&59<n){s=n,g.splice(a,1);break}if(u<0)for(a=0;a<g.length;a++)if(o=1<a||t.monthFirst?a:1===a?0:1,n=parseInt(g[o]),!isNaN(n)&&1<=n&&n<=12){u=n,g.splice(o,1);break}for(a=0;a<g.length;a++)if(n=parseInt(g[a]),!isNaN(n)&&1<=n&&n<=31){l=n,g.splice(a,1);break}if(s<0)for(a=g.length-1;0<=a;a--)if(n=parseInt(g[a]),!isNaN(n)){n<99&&(n+=2e3),s=n,g.splice(a,1);break}}if(!c){if(i<0)for(a=0;a<g.length;a++)if(n=parseInt(g[a]),!isNaN(n)&&0<=n&&n<=23){i=n,g.splice(a,1);break}if(r<0)for(a=0;a<g.length;a++)if(n=parseInt(g[a]),!isNaN(n)&&0<=n&&n<=59){r=n,g.splice(a,1);break}}if(r<0&&i<0&&l<0&&u<0&&s<0)return null;r<0&&(r=0),i<0&&(i=0),l<0&&(l=1),u<0&&(u=1),s<0&&(s=(new Date).getFullYear()),d!==w&&(d?12===i&&(i=0):i<12&&(i+=12));var v=new Date(s,u-1,l,i,r);return v.getMonth()===u-1&&v.getFullYear()===s||(v=new Date(s,u,0,i,r)),isNaN(v.getTime())?null:v}},onChange:function(e,t){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode"}}}(jQuery,window,document);